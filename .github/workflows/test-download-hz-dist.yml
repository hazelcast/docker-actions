name: Test download-hz-dist action

on:
  workflow_call:

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        distribution:
          - hazelcast
          - hazelcast-enterprise
    steps:
      - name: Checkout repository
        uses: actions/checkout@v5

      - name: Download ${{ matrix.distribution }}"
        uses: ./download-hz-dist
        with:
          repo-vars-as-json: "{\n  \"MAVEN_EE_RELEASE_REPO\": \"https://repository.hazelcast.com/release\",\n  \"MAVEN_OSS_RELEASE_REPO\": \" \"\n}"
          distribution: "${{ matrix.distribution }}"
          hz_version: "5.0"
          classifier: "slim"
          packaging: "tar.gz"
          output_file: "distribution"
